<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="new">
    <p id="p1">Messenger</p>
    <p id="p2">---------</p>
</div>

<div id="div1">

</div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/aspnet-signalr/1.1.4/signalr.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aspnet-signalr/1.1.4/signalr.js" ></script>

<script>

    //Initialize SignalR
    var connection = new signalR.HubConnectionBuilder()
        .withUrl('http://localhost:5000/messangerhub?type=ShopToken' )
        .build();
        console.log(connection);

    connection.on('ReceiveMessage', renderMessage);
    connection.start();


    function ready()
    {

    }

    var number = 1
    function renderMessage(name,time,message)
    {
        if(number == 1 )
        {
            var para = document.createElement("p");
            var node = document.createTextNode( ""+name+"");
            para.appendChild(node);
            var element = document.getElementById("div1");
            element.appendChild(para);
        }

        var para = document.createElement("p");
        var node = document.createTextNode( ""+number+"" + " : "+ message);
        para.appendChild(node);
        var element = document.getElementById("div1");
        element.appendChild(para);

        number = number + 1
    }




    document.addEventListener('DOMcontentLoaded' , ready() )

</script>

</html>